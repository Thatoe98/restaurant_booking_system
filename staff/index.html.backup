<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Staff Dashboard - Creator Restaurant</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="dashboard">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <a href="/" class="logo">üçΩÔ∏è Creator Restaurant</a>
        <span class="header-subtitle">Staff Dashboard</span>
      </div>
      <div class="header-right">
        <button class="btn btn-back" id="back-btn" style="display: none;">‚Üê Back</button>
      </div>
    </header>

    <!-- Action Selection (Main Menu) -->
    <section class="action-menu" id="action-menu">
      <h1 class="menu-title">What would you like to do?</h1>
      
      <div class="action-cards">
        <div class="action-card" data-action="tables">
          <div class="action-icon">ü™ë</div>
          <h3>View Tables</h3>
          <p>See current table status, add walk-ins, and free tables</p>
        </div>
        
        <div class="action-card" data-action="bookings">
          <div class="action-icon">üìã</div>
          <h3>Manage Bookings</h3>
          <p>View, add phone bookings, or cancel reservations</p>
        </div>
        
        <div class="action-card" data-action="checkin">
          <div class="action-icon">‚úÖ</div>
          <h3>Check-in Customer</h3>
          <p>Enter booking code to check in arriving guests</p>
        </div>
      </div>
    </section>

    <!-- View Tables Section -->
    <section class="view-section" id="tables-view" style="display: none;">
      <div class="section-header">
        <h2>üìä Table Overview - <span id="tables-date"></span></h2>
        <div class="header-actions">
          <button class="date-btn" id="tables-prev-day">‚óÄ</button>
          <input type="date" id="tables-date-input">
          <button class="date-btn" id="tables-next-day">‚ñ∂</button>
        </div>
      </div>

      <!-- Stats Bar -->
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-value" id="stat-available">0</span>
          <span class="stat-label">Available</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-booked">0</span>
          <span class="stat-label">Booked</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-occupied">0</span>
          <span class="stat-label">Occupied</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-occupancy">0%</span>
          <span class="stat-label">Occupancy</span>
        </div>
      </div>

      <div class="table-legend">
        <span class="legend-item"><span class="dot available"></span> Available</span>
        <span class="legend-item"><span class="dot booked"></span> Booked</span>
        <span class="legend-item"><span class="dot" style="background: var(--checked-in);"></span> Checked In</span>
      </div>

      <div class="tables-grid" id="tables-grid">
        <!-- Tables will be generated here -->
      </div>
    </section>

    <!-- Manage Bookings Section -->
    <section class="view-section" id="bookings-view" style="display: none;">
      <div class="section-header">
        <h2>üìã Manage Bookings</h2>
        <button class="btn btn-primary" id="add-booking-btn">+ Add Phone Booking</button>
      </div>

      <!-- Search/Filter -->
      <div class="search-bar">
        <input type="date" id="booking-filter-date" placeholder="Filter by date">
        <input type="text" id="booking-filter-name" placeholder="Search by name">
        <input type="text" id="booking-filter-code" placeholder="Search by booking code">
        <button class="btn btn-secondary" id="clear-filters-btn">Clear</button>
      </div>

      <div class="bookings-list" id="bookings-list">
        <!-- Bookings will be listed here -->
      </div>
    </section>

    <!-- Check-in Section -->
    <section class="view-section" id="checkin-view" style="display: none;">
      <div class="checkin-container">
        <div class="checkin-icon">‚úÖ</div>
        <h2>Customer Check-in</h2>
        <p class="checkin-description">Enter the booking code shown by the customer</p>
        
        <div class="code-input-container">
          <input type="text" id="checkin-code" placeholder="Enter booking code" autocomplete="off">
          <button class="btn btn-primary btn-lg" id="verify-code-btn">Verify Code</button>
        </div>

        <div class="booking-details-card" id="booking-details" style="display: none;">
          <!-- Booking details will appear here -->
        </div>
      </div>
    </section>
        <h2>Table Overview</h2>
        <div class="table-legend">
          <span class="legend-item"><span class="dot available"></span> Available</span>
          <span class="legend-item"><span class="dot booked"></span> Booked (within 1hr)</span>
          <span class="legend-item"><span class="dot" style="background: var(--checked-in);"></span> Checked In</span>
          <span class="legend-item"><span class="dot available" style="border: 2px dashed var(--available);"></span> Has later booking</span>
          <span class="legend-item"><span class="dot booked"></span>‚ö†Ô∏è Overdue (15+ mins)</span>
        </div>
        <div class="tables-grid" id="tables-grid">
          <!-- Tables will be generated here -->
        </div>
      </section>

      <!-- Details Panel -->
      <aside class="details-panel" id="details-panel">
        <div class="panel-placeholder" id="panel-placeholder">
          <p>üëÜ Select a table to view details</p>
        </div>
        
        <div class="panel-content" id="panel-content" style="display: none;">
          <div class="panel-header">
            <h3>Table <span id="panel-table-number"></span></h3>
            <span class="status-badge" id="panel-status"></span>
          </div>
          
          <div class="panel-info">
            <p><strong>Capacity:</strong> <span id="panel-capacity"></span> guests</p>
            <p><strong>Features:</strong> <span id="panel-properties"></span></p>
          </div>
          
          <!-- Booking Details (if booked) -->
          <div class="booking-details" id="booking-details" style="display: none;">
            <h4>Current Booking</h4>
            <div class="booking-info">
              <p><strong>Code:</strong> <span id="booking-code"></span></p>
              <p><strong>Name:</strong> <span id="booking-name"></span></p>
              <p><strong>Phone:</strong> <span id="booking-phone"></span></p>
              <p><strong>Email:</strong> <span id="booking-email"></span></p>
              <p><strong>Time:</strong> <span id="booking-time"></span></p>
              <p><strong>Guests:</strong> <span id="booking-party"></span></p>
              <p id="booking-requests-row" style="display: none;"><strong>Requests:</strong> <span id="booking-requests"></span></p>
              <p><strong>Status:</strong> <span id="booking-status"></span></p>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div class="panel-actions" id="panel-actions">
            <!-- Buttons will be generated based on status -->
          </div>
        </div>
      </aside>
    </main>

    <!-- Today's Bookings -->
    <section class="bookings-section">
      <h2>üìÖ Bookings for <span id="bookings-date"></span></h2>
      <div class="bookings-list" id="bookings-list">
        <!-- Bookings will be generated here -->
      </div>
    </section>

    <!-- Walk-in Modal -->
    <div class="modal" id="walkin-modal" style="display: none;">
      <div class="modal-content">
        <h3>Mark as Walk-in</h3>
        <p>Table <span id="walkin-table-number"></span></p>
        <form id="walkin-form">
          <div class="form-group">
            <label for="walkin-name">Customer Name (optional)</label>
            <input type="text" id="walkin-name" placeholder="Walk-in customer">
          </div>
          <div class="form-group">
            <label for="walkin-party">Party Size</label>
            <input type="number" id="walkin-party" min="1" max="20" value="2">
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-secondary" id="walkin-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Confirm Walk-in</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Phone Booking Modal -->
    <div class="modal" id="phone-booking-modal" style="display: none;">
      <div class="modal-content">
        <h3>Phone Booking</h3>
        <p>Table <span id="phone-table-number"></span></p>
        <form id="phone-booking-form">
          <div class="form-group">
            <label for="phone-customer-name">Customer Name *</label>
            <input type="text" id="phone-customer-name" required>
          </div>
          <div class="form-group">
            <label for="phone-customer-phone">Phone Number *</label>
            <input type="tel" id="phone-customer-phone" required>
          </div>
          <div class="form-group">
            <label for="phone-customer-email">Email (optional)</label>
            <input type="email" id="phone-customer-email">
          </div>
          <div class="form-group">
            <label for="phone-booking-time">Booking Time *</label>
            <input type="time" id="phone-booking-time" required>
          </div>
          <div class="form-group">
            <label for="phone-party-size">Party Size *</label>
            <input type="number" id="phone-party-size" min="1" max="20" value="2" required>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-secondary" id="phone-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Create Booking</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading" style="display: none;">
      <div class="spinner"></div>
      <p>Processing...</p>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>
