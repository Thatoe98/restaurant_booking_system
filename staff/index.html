<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Staff Dashboard - Creator Restaurant</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="dashboard">
    <!-- Language Toggle -->
    <div class="language-toggle">
      <button class="lang-btn active" data-lang="en">EN</button>
      <button class="lang-btn" data-lang="my">á€™á€¼á€”á€ºá€™á€¬</button>
    </div>
    
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <a href="/" class="logo" data-i18n="staff.header">ğŸ½ï¸ Creator Restaurant</a>
        <span class="header-subtitle" data-i18n="staff.subtitle">Staff Dashboard</span>
      </div>
      <div class="header-center">
        <div class="current-time">
          <span class="time-icon">ğŸ•</span>
          <span id="current-time">--:--:--</span>
          <span class="time-date" id="current-date">---</span>
        </div>
      </div>
      <div class="header-right">
        <button class="btn btn-back" id="back-btn" style="display: none;" data-i18n="staff.back">â† Back</button>
      </div>
    </header>

    <!-- Action Selection (Main Menu) -->
    <section class="action-menu" id="action-menu">
      <h1 class="menu-title" data-i18n="staff.menuTitle">What would you like to do?</h1>
      
      <div class="action-cards">
        <div class="action-card" data-action="tables">
          <div class="action-icon">ğŸª‘</div>
          <h3 data-i18n="staff.viewTables">View Tables</h3>
          <p data-i18n="staff.viewTablesDesc">See current table status, add walk-ins, and free tables</p>
        </div>
        
        <div class="action-card" data-action="bookings">
          <div class="action-icon">ğŸ“‹</div>
          <h3 data-i18n="staff.manageBookings">Manage Bookings</h3>
          <p data-i18n="staff.manageBookingsDesc">View, add phone bookings, or cancel reservations</p>
        </div>
        
        <div class="action-card" data-action="checkin">
          <div class="action-icon">âœ…</div>
          <h3 data-i18n="staff.checkin">Check-in Customer</h3>
          <p data-i18n="staff.checkinDesc">Enter booking code to check in arriving guests</p>
        </div>
      </div>
    </section>

    <!-- View Tables Section -->
    <section class="view-section" id="tables-view" style="display: none;">
      <div class="section-header">
        <h2><span data-i18n="staff.tableOverview">ğŸ“Š Table Overview -</span> <span id="tables-date"></span></h2>
        <div class="header-actions">
          <button class="date-btn" id="tables-prev-day">â—€</button>
          <input type="date" id="tables-date-input">
          <button class="date-btn" id="tables-next-day">â–¶</button>
        </div>
      </div>

      <!-- Stats Bar -->
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-value" id="stat-available">0</span>
          <span class="stat-label" data-i18n="staff.statAvailable">Available</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-booked">0</span>
          <span class="stat-label" data-i18n="staff.statBooked">Booked</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-occupied">0</span>
          <span class="stat-label" data-i18n="staff.statOccupied">Occupied</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-occupancy">0%</span>
          <span class="stat-label" data-i18n="staff.statOccupancy">Occupancy</span>
        </div>
      </div>

      <div class="table-legend">
        <span class="legend-item"><span class="dot available"></span> <span data-i18n="staff.legendAvailable">Available</span></span>
        <span class="legend-item"><span class="dot booked"></span> <span data-i18n="staff.legendBooked">Booked</span></span>
        <span class="legend-item"><span class="dot" style="background: var(--checked-in);"></span> <span data-i18n="staff.legendCheckedIn">Checked In</span></span>
        <span class="legend-item"><span class="dot" style="background: var(--occupied);"></span> <span data-i18n="staff.legendOverdue">âš ï¸ Overdue (15+ mins)</span></span>
      </div>

      <div class="tables-grid" id="tables-grid">
        <!-- Tables will be generated here -->
      </div>
    </section>

    <!-- Manage Bookings Section -->
    <section class="view-section" id="bookings-view" style="display: none;">
      <div class="section-header">
        <h2 data-i18n="staff.manageBookingsTitle">ğŸ“‹ Manage Bookings</h2>
        <button class="btn btn-primary" id="add-booking-btn" data-i18n="staff.addBooking">+ Add Phone Booking</button>
      </div>

      <!-- Search/Filter -->
      <div class="search-bar">
        <input type="date" id="booking-filter-date" data-i18n="staff.filterDate" placeholder="Filter by date">
        <input type="text" id="booking-filter-name" data-i18n="staff.searchName" placeholder="Search by name">
        <input type="text" id="booking-filter-code" data-i18n="staff.searchCode" placeholder="Search by booking code">
        <button class="btn btn-secondary" id="clear-filters-btn" data-i18n="staff.clearFilters">Clear</button>
      </div>

      <div class="bookings-list" id="bookings-list">
        <!-- Bookings will be listed here -->
      </div>
    </section>

    <!-- Check-in Section -->
    <section class="view-section" id="checkin-view" style="display: none;">
      <div class="checkin-container">
        <div class="checkin-icon">âœ…</div>
        <h2 data-i18n="staff.checkinTitle">Customer Check-in</h2>
        <p class="checkin-description" data-i18n="staff.checkinDesc">Enter the booking code shown by the customer</p>
        
        <div class="code-input-container">
          <input type="text" id="checkin-code" data-i18n="staff.enterCode" placeholder="Enter booking code" autocomplete="off">
          <button class="btn btn-primary btn-lg" id="verify-code-btn" data-i18n="staff.verifyCode">Verify Code</button>
        </div>

        <div class="booking-details-card" id="booking-details-card" style="display: none;">
          <!-- Booking details will appear here -->
        </div>
      </div>
    </section>

    <!-- Walk-in Modal -->
    <div class="modal" id="walkin-modal" style="display: none;">
      <div class="modal-content">
        <h3 data-i18n="staff.walkinTitle">Add Walk-in Customer</h3>
        <p><span data-i18n="staff.walkinTable">Table</span> <span id="walkin-table-number"></span></p>
        <form id="walkin-form">
          <div class="form-group">
            <label for="walkin-name" data-i18n="staff.walkinName">Customer Name (optional)</label>
            <input type="text" id="walkin-name" data-i18n="staff.walkinNamePlaceholder" placeholder="Walk-in customer">
          </div>
          <div class="form-group">
            <label for="walkin-party" data-i18n="staff.walkinParty">Party Size *</label>
            <input type="number" id="walkin-party" min="1" max="20" value="2" required>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-secondary" id="walkin-cancel" data-i18n="staff.walkinCancel">Cancel</button>
            <button type="submit" class="btn btn-primary" data-i18n="staff.walkinConfirm">Confirm Walk-in</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Quick Check-in Modal -->
    <div class="modal" id="quick-checkin-modal" style="display: none;">
      <div class="modal-content">
        <h3 data-i18n="staff.quickCheckinTitle">âœ… Check-in Customer</h3>
        <div id="quick-checkin-details" class="booking-info">
          <!-- Details will be populated -->
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" id="quick-checkin-cancel" data-i18n="staff.walkinCancel">Cancel</button>
          <button type="button" class="btn btn-primary" id="quick-checkin-confirm" data-i18n="staff.quickCheckinConfirm">Confirm Check-in</button>
        </div>
      </div>
    </div>

    <!-- Free Table Modal -->
    <div class="modal" id="free-table-modal" style="display: none;">
      <div class="modal-content">
        <h3 data-i18n="staff.freeTableTitle">ğŸ Free Table</h3>
        <div id="free-table-details" class="booking-info">
          <!-- Details will be populated -->
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" id="free-table-cancel" data-i18n="staff.walkinCancel">Cancel</button>
          <button type="button" class="btn btn-primary" id="free-table-confirm" data-i18n="staff.freeTableConfirm">Complete & Free Table</button>
        </div>
      </div>
    </div>

    <!-- Overdue Booking Modal -->
    <div class="modal" id="overdue-booking-modal" style="display: none;">
      <div class="modal-content">
        <h3 data-i18n="staff.overdueTitle">âš ï¸ Overdue Booking</h3>
        <div id="overdue-booking-details" class="booking-info">
          <!-- Details will be populated -->
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" id="overdue-cancel" data-i18n="staff.close">Close</button>
          <button type="button" class="btn btn-danger" id="overdue-cancel-booking" data-i18n="staff.overdueCancel">Cancel Booking</button>
        </div>
      </div>
    </div>

    <!-- Phone Booking Modal -->
    <div class="modal modal-large" id="phone-booking-modal" style="display: none;">
      <div class="modal-content">
        <h3>ğŸ“ Add Phone Booking</h3>
        
        <form id="phone-booking-form">
          <div class="form-row">
            <div class="form-group">
              <label for="phone-customer-name">Customer Name *</label>
              <input type="text" id="phone-customer-name" placeholder="John Doe" required>
            </div>
            <div class="form-group">
              <label for="phone-customer-phone">Phone Number *</label>
              <input type="tel" id="phone-customer-phone" placeholder="+1234567890" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="phone-customer-email">Email (optional)</label>
              <input type="email" id="phone-customer-email" placeholder="john@example.com">
            </div>
            <div class="form-group">
              <label for="phone-party-size">Party Size *</label>
              <input type="number" id="phone-party-size" min="1" max="20" value="2" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="phone-booking-date">Booking Date *</label>
              <input type="date" id="phone-booking-date" required>
            </div>
            <div class="form-group">
              <label for="phone-booking-time">Booking Time *</label>
              <select id="phone-booking-time" required>
                <!-- Time slots will be populated -->
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="phone-special-requests">Special Requests (optional)</label>
            <textarea id="phone-special-requests" rows="2" placeholder="Any dietary restrictions or special requests..."></textarea>
          </div>

          <!-- Customer Preferences -->
          <div class="preference-section">
            <label>Customer Preferences (optional)</label>
            <div class="preference-filters">
              <button type="button" class="filter-btn" data-filter="all">All Tables</button>
              <button type="button" class="filter-btn" data-filter="garden">ğŸŒ¿ Garden</button>
              <button type="button" class="filter-btn" data-filter="smoking">ğŸš¬ Smoking</button>
              <button type="button" class="filter-btn" data-filter="vip">â­ VIP</button>
              <button type="button" class="filter-btn" data-filter="window">ğŸªŸ Window</button>
            </div>
          </div>

          <!-- Table Selection -->
          <div class="table-selection-section">
            <label>Select Table *</label>
            <p class="help-text">Green = Available, Gray = Booked/Unavailable</p>
            <div class="phone-tables-grid" id="phone-tables-grid">
              <!-- Tables will be populated -->
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn btn-secondary" id="phone-booking-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary btn-lg">Create Booking</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading" style="display: none;">
      <div class="spinner"></div>
      <p data-i18n="staff.loading">Processing...</p>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>
